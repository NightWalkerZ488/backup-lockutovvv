# Домашнее задание к занятию "`Резервное копирование`" - `Лоскутов Вячеслав`


### Задание 1

`
    Составьте команду rsync, которая позволяет создавать зеркальную копию домашней директории пользователя в директорию /tmp/backup
    Необходимо исключить из синхронизации все директории, начинающиеся с точки (скрытые)
    Необходимо сделать так, чтобы rsync подсчитывал хэш-суммы для всех файлов, даже если их время модификации и размер идентичны в источнике и приемнике.
    На проверку направить скриншот с командой и результатом ее выполнения
`

### Ответ:

![Команда](https://github.com/NightWalkerZ488/sys-pattern-homework/blob/main/rsync.PNG)

    -a — архивный режим, включает рекурсию, сохранение атрибутов, владельца, временных меток и т.д.
    -v — выводит подробный лог синхронизации (verbose).
    -h — удобочитаемый вывод размеров файлов (human-readable).
    --checksum — заставляет rsync всегда вычислять хэш-суммы файлов для сравнения, игнорируя метку времени и размер.
    --exclude='.*' — исключает из копирования все элементы, имена которых начинаются с точки (скрытые файлы и папки).
    ~/ — исходная директория (домашняя директория пользователя).
    /tmp/backup — целевая директория, куда будет создана зеркальная копия.
     
### Задание 2

`   Написать скрипт и настроить задачу на регулярное резервное копирование домашней директории пользователя с помощью rsync и cron.
    Резервная копия должна быть полностью зеркальной
    Резервная копия должна создаваться раз в день, в системном логе должна появляться запись об успешном или неуспешном выполнении операции
    Резервная копия размещается локально, в директории /tmp/backup
    На проверку направить файл crontab и скриншот с результатом работы утилиты.
`
### Ответ:

1. Создаём скрипт с необходимыми параметрами:
`#!/bin/bash

SOURCE="$HOME/"
DEST="/tmp/backup"
LOG_TAG="rsync_backup"

rsync -a --checksum --exclude='.*' --delete "$SOURCE" "$DEST"

if [ $? -eq 0 ]; then
    logger -t "$LOG_TAG" "Резервное копирование произведено успешно."
else
    logger -t "$LOG_TAG" "Ошибка при выполнении."
fi`

2. Создаём задание в Cron:
`0 0 * * * /usr/local/bin/backup.sh`
![Файл cron](https://github.com/NightWalkerZ488/sys-pattern-homework/blob/main/crontab)

3. Результат работы скрипта:
![Работа скрипта](https://github.com/NightWalkerZ488/sys-pattern-homework/blob/main/backUP.PNG)






